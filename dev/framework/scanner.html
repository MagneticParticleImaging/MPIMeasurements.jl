<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scanner · MPIMeasurements</title><meta name="title" content="Scanner · MPIMeasurements"/><meta property="og:title" content="Scanner · MPIMeasurements"/><meta property="twitter:title" content="Scanner · MPIMeasurements"/><meta name="description" content="Documentation for MPIMeasurements."/><meta property="og:description" content="Documentation for MPIMeasurements."/><meta property="twitter:description" content="Documentation for MPIMeasurements."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">MPIMeasurements</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><a class="tocitem" href="../installation.html">Installation</a></li><li><span class="tocitem">Framework</span><ul><li class="is-active"><a class="tocitem" href="scanner.html">Scanner</a><ul class="internal"><li><a class="tocitem" href="#Scanner.toml"><span>Scanner.toml</span></a></li></ul></li><li><a class="tocitem" href="devices.html">Devices</a></li><li><a class="tocitem" href="sequences.html">Sequences</a></li><li><a class="tocitem" href="protocols.html">Protocols</a></li><li><a class="tocitem" href="examples.html">Examples</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Framework</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lib/framework/scanner.html">Scanner</a></li><li><a class="tocitem" href="../lib/framework/device.html">Device</a></li><li><a class="tocitem" href="../lib/framework/sequence.html">Sequence</a></li><li><a class="tocitem" href="../lib/framework/protocol.html">Protocol</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Base</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-2-1" type="checkbox"/><label class="tocitem" for="menuitem-4-2-1"><span class="docs-label">Devices</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-2-1-1" type="checkbox"/><label class="tocitem" for="menuitem-4-2-1-1"><span class="docs-label">Robots</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lib/base/devices/robots/interface.html">Interface</a></li><li><a class="tocitem" href="../lib/base/devices/robots/isel.html">Isel</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2-1-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2-1-2"><span class="docs-label">Virtual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lib/base/devices/virtual/serialportpool.html">Serial Port Pool</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2-2"><span class="docs-label">Protocols</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lib/base/protocols/mpimeasurement.html">MPIMeasurement</a></li></ul></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Framework</a></li><li class="is-active"><a href="scanner.html">Scanner</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="scanner.html">Scanner</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/MagneticParticleImaging/MPIMeasurements.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/MagneticParticleImaging/MPIMeasurements.jl/blob/master/docs/src/framework/scanner.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Scanner"><a class="docs-heading-anchor" href="#Scanner">Scanner</a><a id="Scanner-1"></a><a class="docs-heading-anchor-permalink" href="#Scanner" title="Permalink"></a></h1><p>A <code>Scanner</code> represents a composition of hard- and software components or <code>Devices</code> and a set of configuration files. Each scanner is defined in its own configuration directory with the following structure:</p><pre><code class="nohighlight hljs">ScannerName/
├── Sequences/
│   └── &lt;sequence 1 name&gt;.toml
│   └── &lt;sequence 2 name&gt;.toml
│   └── ...
├── Devices/
│   └── &lt;device 1 name&gt;.toml
│   └── &lt;device 2 name&gt;.toml
│   └── ...
├── Protocols/
│   └── &lt;protocol 1 name&gt;.toml
│   └── &lt;protocol 2 name&gt;.toml
│   └── ...
└── Scanner.toml</code></pre><p>The <code>Scanner</code> data structure is the entry point for working with an MPI system within <code>MPIMeasurements.jl</code>, as it manages both the composition of <code>Devices</code> and the construction of <code>Sequences</code> and <code>Protocols</code> based on the configuration directory. A <code>Scanner</code> is constructed with the <code>MPIScanner</code> function and the name of the desired configuration directoy:  </p><pre><code class="language-julia-repl hljs">julia&gt; scanner = MPIScanner(&quot;ScannerName&quot;);</code></pre><p>During construction, all <code>Devices</code> of the scanner are also constructed and initialised according to the parameters contained in the <code>Scanner.toml</code> configuration file.</p><h2 id="Scanner.toml"><a class="docs-heading-anchor" href="#Scanner.toml">Scanner.toml</a><a id="Scanner.toml-1"></a><a class="docs-heading-anchor-permalink" href="#Scanner.toml" title="Permalink"></a></h2><p>The <code>Scanner.toml</code> contains the configuration parameters of the <code>Scanner</code> and is structured into three sections. </p><h3 id="General-Section"><a class="docs-heading-anchor" href="#General-Section">General Section</a><a id="General-Section-1"></a><a class="docs-heading-anchor-permalink" href="#General-Section" title="Permalink"></a></h3><p>The general section contains the details of the scanner. The fields correspond to the <code>scanner</code> group of the <a href="https://github.com/MagneticParticleImaging/MDF">MPI data format (MDF)</a> and are used when writing a measurement to disk. All fields that have units will be parsed with <a href="https://github.com/PainterQubits/Unitful.jl">Unitful</a> and should therefore be denoted as strings with the unit attached without a space. This also applies to the <a href="@ref">Devices section</a>.</p><pre><code class="language-toml hljs">[General]
boreSize = &quot;XXmm&quot;
facility = &quot;&lt;facility&gt;&quot;
manufacturer = &quot;&lt;manufacturer&gt;&quot;
name = &quot;&lt;scanner name&gt;&quot;
topology = &quot;&lt;FFP|FFL|MPS&gt;&quot;
gradient = &quot;XXT/m&quot;</code></pre><h3 id="Runtime-Section"><a class="docs-heading-anchor" href="#Runtime-Section">Runtime Section</a><a id="Runtime-Section-1"></a><a class="docs-heading-anchor-permalink" href="#Runtime-Section" title="Permalink"></a></h3><p>The protocol section contains hints for <code>Protocol</code>, scripts and GUI implementations, such as on which Julia threads to run certain threads or which default <code>Sequences</code> to display.</p><pre><code class="language-toml hljs">[Runtime]
defaultProtocol = &quot;&lt;protocol X name&gt;&quot;
transferFunction = &quot;&lt;file path&gt;&quot;
dataStorage = &quot;&lt;file path&quot;&gt;
# Which Julia threads to run common tasks on
protocolThreadID = 2
producerThreadID = 3
consumerThreadID = 4
serialThreadID = 5</code></pre><h3 id="Device-Section"><a class="docs-heading-anchor" href="#Device-Section">Device Section</a><a id="Device-Section-1"></a><a class="docs-heading-anchor-permalink" href="#Device-Section" title="Permalink"></a></h3><p>All devices that can be used by the scanner should be listed in this section. It describes the hardware properties such as maximum and minimum values for DAQ devices, connection details such as IPs, etc. Aside from common parameters such as the <code>deviceType</code> or the <code>dependencies</code>, the parameters of each device type can differ.</p><p>Since the initialization order sometimes matters, it must be explicitly specified in the main section by putting the device IDs in the correct order. Each device must specify at least one <code>deviceType</code> corresponding to the respective device structure.</p><pre><code class="language-toml hljs">[Devices]
initializationOrder = [
    &quot;my_device_id1&quot;,
    &quot;my_device_id2&quot;
]

[Devices.my_device_id1]
deviceType = &quot;&lt;device type as given by the struct name&gt;&quot;
parameter1 = 1000
parameter2 = &quot;25kHz&quot;

[Devices.my_device_id2]
deviceType = &quot;&lt;device type as given by the struct name&gt;&quot;
dependencies = [&quot;my_device_id1&quot;]
parameter = &quot;192.168.1.100&quot;</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../installation.html">« Installation</a><a class="docs-footer-nextpage" href="devices.html">Devices »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Tuesday 4 June 2024 08:35">Tuesday 4 June 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
