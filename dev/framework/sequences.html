<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Sequences · MPIMeasurements</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">MPIMeasurements</a></span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><a class="tocitem" href="../installation.html">Installation</a></li><li><span class="tocitem">Framework</span><ul><li><a class="tocitem" href="scanner.html">Scanner</a></li><li><a class="tocitem" href="devices.html">Devices</a></li><li class="is-active"><a class="tocitem" href="sequences.html">Sequences</a><ul class="internal"><li><a class="tocitem" href="#General-Settings"><span>General Settings</span></a></li><li><a class="tocitem" href="#Acquisition-Settings"><span>Acquisition Settings</span></a></li><li><a class="tocitem" href="#Magnetic-Fields"><span>Magnetic Fields</span></a></li></ul></li><li><a class="tocitem" href="protocols.html">Protocols</a></li><li><a class="tocitem" href="examples.html">Examples</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Framework</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lib/framework/scanner.html">Scanner</a></li><li><a class="tocitem" href="../lib/framework/device.html">Device</a></li><li><a class="tocitem" href="../lib/framework/sequence.html">Sequence</a></li><li><a class="tocitem" href="../lib/framework/protocol.html">Protocol</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Base</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-2-1" type="checkbox"/><label class="tocitem" for="menuitem-4-2-1"><span class="docs-label">Devices</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-2-1-1" type="checkbox"/><label class="tocitem" for="menuitem-4-2-1-1"><span class="docs-label">Robots</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lib/base/devices/robots/interface.html">Interface</a></li><li><a class="tocitem" href="../lib/base/devices/robots/isel.html">Isel</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2-1-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2-1-2"><span class="docs-label">Virtual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lib/base/devices/virtual/serialportpool.html">Serial Port Pool</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2-2"><span class="docs-label">Protocols</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lib/base/protocols/mpimeasurement.html">MPIMeasurement</a></li></ul></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Framework</a></li><li class="is-active"><a href="sequences.html">Sequences</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="sequences.html">Sequences</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/MagneticParticleImaging/MPIMeasurements.jl/blob/master/docs/src/framework/sequences.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Sequences"><a class="docs-heading-anchor" href="#Sequences">Sequences</a><a id="Sequences-1"></a><a class="docs-heading-anchor-permalink" href="#Sequences" title="Permalink"></a></h1><p>A <code>Sequence</code> is an abstract description of magnetic fields being applied during an experiment, as well as the used acquisition parameters. It is the data acquisition (DAQ) <code>Device</code> responsibility to produce and acquire the necessary signals described in a <code>Sequence</code>.</p><p><code>MPIMeasurements.jl</code> contains an implementation of a <code>DAQ</code> based on the <a href="https://github.com/tknopp/RedPitayaDAQServer">RedPitayaDAQServer</a> project. This, together with the <a href="https://github.com/MagneticParticleImaging/MDF">MPI data format (MDF)</a>, motivated the structure of a <code>Sequence</code>. However, any <code>DAQ</code> capable of producing the following signals could be used instead. A <code>DAQ</code> device needs to map the channel and components mentioned in a <code>Sequence</code>, into its own representation.</p><p>A <code>Sequence</code> contains a general description of itself, acquisition parameters and a list of magnetic fields. <code>Sequences</code> are constructed from a <code>Scanners</code> configuration directory as follows:</p><pre><code class="language-julia-repl hljs">julia&gt; sequence = Sequence(scanner, &quot;&lt;sequence X name&gt;&quot;)</code></pre><h2 id="General-Settings"><a class="docs-heading-anchor" href="#General-Settings">General Settings</a><a id="General-Settings-1"></a><a class="docs-heading-anchor-permalink" href="#General-Settings" title="Permalink"></a></h2><p>The general section contains a description string for the sequence, as well as the target scanner name and lastly the base frequency from which the other magnetic field are derived.</p><pre><code class="language-toml hljs">[General]
description = &quot;&lt;Sequence Description&gt;&quot;
targetScanner = &quot;&lt;ScannerName&gt;&quot;
baseFrequency = &quot;125MHz&quot;</code></pre><h2 id="Acquisition-Settings"><a class="docs-heading-anchor" href="#Acquisition-Settings">Acquisition Settings</a><a id="Acquisition-Settings-1"></a><a class="docs-heading-anchor-permalink" href="#Acquisition-Settings" title="Permalink"></a></h2><p>The acquisition settings list which receive channels of a <code>Scanner</code> should be acquired during a measurement and with which sampling rate. Furthermore, it contains a description of the length of a measurement or rather how much samples should be acquired and if they should be averaged. This section is related to the acquisition parameters in an MDF file. </p><pre><code class="language-toml hljs">[Acquisition]
channels = [&quot;rx1&quot;, &quot;rx2&quot;]
bandwidth = &quot;&lt;XX&gt;Hz&quot;
numPeriodsPerFrame = 1
numFrames = 1
numAverages = 1</code></pre><h2 id="Magnetic-Fields"><a class="docs-heading-anchor" href="#Magnetic-Fields">Magnetic Fields</a><a id="Magnetic-Fields-1"></a><a class="docs-heading-anchor-permalink" href="#Magnetic-Fields" title="Permalink"></a></h2><p>The last section of a <code>Sequence</code> is the description of the desired magnetic fields. A <code>Sequence</code> can contain any number of magnetic fields, while each magnetic field in turn can contain any number of transmit channel (<code>TxChannel</code>).</p><p><code>TxChannel</code> can be grouped into electrical or mechanical channel. The former can be further divided into periodic and into acyclic electrical channel, while the latter can be divided into mechanical translation and mechanical rotation channel.</p><p>Next to these <code>TxChannel</code>, a magnetic field also contains parameters if its channel should be controlled, decoupled or should feature ramping of its signals.</p><pre><code class="language-toml hljs">[Fields.df] # Drive Field 
control = true</code></pre><h3 id="Periodic-Electrical-Channel"><a class="docs-heading-anchor" href="#Periodic-Electrical-Channel">Periodic Electrical Channel</a><a id="Periodic-Electrical-Channel-1"></a><a class="docs-heading-anchor-permalink" href="#Periodic-Electrical-Channel" title="Permalink"></a></h3><p>A periodic electrical channel is a <code>TxChannel</code>, that contains any number of electrical periodic functions or components. Each component is described by a divider referencing the base frequency, as well as an amplitude, phase and waveform. These components are modeled after the drive field parameters of the MDF.</p><pre><code class="language-toml hljs">[Fields.df.dfx] # X Channel
type = &quot;PeriodicElectricalChannel&quot;
offset = &quot;0.0mT&quot;

[Fields.df.dfx.c1] # Sine Wave
type = &quot;PeriodicElectricalComponent&quot;
divider = 4864
amplitude = [&quot;0.0025T&quot;]
phase = [&quot;0.0rad&quot;]
waveform = &quot;sine&quot;</code></pre><p>By default periodic electrical channel are interpreted as drive fields and in particular count towards the length of a drive field cycle.</p><h3 id="Acyclic-Electrical-Channel"><a class="docs-heading-anchor" href="#Acyclic-Electrical-Channel">Acyclic Electrical Channel</a><a id="Acyclic-Electrical-Channel-1"></a><a class="docs-heading-anchor-permalink" href="#Acyclic-Electrical-Channel" title="Permalink"></a></h3><p>An acyclic electrical channel describes changing non-periodic electrical signals. These can be used to describe multi-patch sequences as they can provide descriptions for changing gradient and offset signals during a frame.</p><pre><code class="language-toml hljs">[Fields.ff] # Focus Field
control = false

[Fields.ff.patches]
type = &quot;ContinuousElectricalChannel&quot;
dividerSteps = 364800
divider = 31008000
amplitude = &quot;3.8A&quot;
offset = &quot;10.0A&quot;
phase = &quot;3.14rad&quot;
waveform = &quot;triangle&quot;</code></pre><p>The above example shows an acylic electrical channel with a 4-Hz triangular waveform sampled uniformly at 85 points. </p><p>Instead of sampling pre-defined analytical functions, it is also possible to directly state a series of values.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="devices.html">« Devices</a><a class="docs-footer-nextpage" href="protocols.html">Protocols »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 17 April 2023 09:40">Monday 17 April 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
